#include "Perso.h"
#include <cstdlib>
#include <fstream>
#include <iostream>
using namespace std;


perso::perso()
{

ifstream fichier("Perso.dat", ios::in);  // on ouvre le fichier en lecture
 	
        if(fichier)  // si l'ouverture a réussi
        {       
           
		string name;  // déclaration d'une chaîne qui contiendra la ligne lue
		int PointDeVie,PointDeMana,DmgMin,DmgMax;
               	fichier >> name >> PointDeVie >> PointDeMana >> DmgMin >> DmgMax;
                fichier.close();  // on ferme le fichier
		this->nom=name;
		this->PointDeVie=PointDeVie;
		this->PointDeMana=PointDeMana;
		this-> DmgMin= DmgMin;
		this-> DmgMax= DmgMax;
	
        }
        else  
                cerr << "Impossible d'ouvrir le fichier !" << endl;
 
      
}

////////////////////////////////////////////////////////////////////////
string perso::getname()
{
	return this->nom;
}
////////////////////////////////////////////////////////////////////////
int perso::getPointDeVie()
{
	return this->PointDeVie;
}
////////////////////////////////////////////////////////////////////////
int perso::getPointDeMana()
{
	return this->PointDeMana;
}
////////////////////////////////////////////////////////////////////////
int perso::getDmgMax()
{
	return this->DmgMax;
}
////////////////////////////////////////////////////////////////////////
int perso::getDmgMin()
{
	return this->DmgMin;
}

int perso::setPm(int n)
{
	this->PointDeMana=this->PointDeMana-n;
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////




int guerrier::AttackBase()
{
	int dmg;
	srand (time(NULL));

	dmg = rand() % this->DmgMax + this->DmgMin;/* generate secret number between 1 and 10: */
	dmg+=2;
	return dmg;

}



int guerrier::CompD()
{	this->setPm(20);
	int dmg=24;
	return dmg;

}

int guerrier::CompDef1()
{

this->AttackBase();
this->AttackBase();

}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////




int mage::AttackBase()
{
	int dmg;
	srand (time(NULL));

	dmg = rand() % 10 + 1;/* generate secret number between 1 and 10: */
	return dmg;

}



int mage::CompD()
{	this->setPm(20);
	int dmg=24;
	return dmg;

}

int mage::CompDef1()
{

this->AttackBase();
this->AttackBase();

}


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


monster::monster()
{

ifstream fichier("Monster.dat", ios::in);  // on ouvre le fichier en lecture
 	
        if(fichier)  // si l'ouverture a réussi
        {       
           
		string name;  // déclaration d'une chaîne qui contiendra la ligne lue
		int PointDeVie,DmgMin,DmgMax;
               	fichier >> PointDeVie >>  DmgMin >> DmgMax;
                fichier.close();  // on ferme le fichier
		this->PointDeVie=PointDeVie;
		this-> DmgMin= DmgMin;
		this-> DmgMax= DmgMax;
	
        }
        else  
                cerr << "Impossible d'ouvrir le fichier !" << endl;
 
      
}

int monster::AttackBase()
{
	int dmg;
	srand (time(NULL));

	dmg = rand() % this->DmgMax + this->DmgMin;/* generate secret number between 1 and 10: */
	return dmg;

}


////////////////////////////////////////////////////////////////////////
int monster::getPointDeVie()
{
	return this->PointDeVie;
} 
////////////////////////////////////////////////////////////////////////
int monster::getDmgMax()
{
	return this->DmgMax;
}
////////////////////////////////////////////////////////////////////////
int monster::getDmgMin()
{
	return this->DmgMin;
}

void monster::setPv(int n)
{
	this->PointDeVie=this->PointDeVie-n;
}


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

/*int main(){

guerrier p;
monster m;

cout<<"PointDeMana avant utilisation de la CompD : "<<p.getPointDeMana()<<endl;
cout<<"degat CompD du guerrier : "<<p.CompD()<<endl;
cout<<"PointDeMana apres utilisation de la CompD : "<<p.getPointDeMana()<<endl;

cout<<"PointDeVie du monstre : "<<m.getPointDeVie()<<endl;

m.setPv(p.CompD());

cout<<"PointDeVie du monstre : "<<m.getPointDeVie()<<endl;

return 0;

}*/
